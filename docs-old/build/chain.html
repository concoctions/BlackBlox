

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The Process Chain Module &mdash; blackblox.py 0.2.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="The Unit Process Module" href="unit.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html">
          

          
            
            <img src="_static/logo150.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                blackblox v0.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">What is blackblox.py?</a></li>
<li class="toctree-l1"><a class="reference internal" href="unit.html">The Unit Process Module</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">The Process Chain Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#productchain-class">ProductChain Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="#productchain-build">ProductChain.build()</a></li>
<li class="toctree-l2"><a class="reference internal" href="#productchain-balance">ProductChain.balance()</a></li>
<li class="toctree-l2"><a class="reference internal" href="#productchain-diagram">ProductChain.diagram()</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">blackblox.py</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>The Process Chain Module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/chain.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-processchain">
<span id="the-process-chain-module"></span><h1>The Process Chain Module<a class="headerlink" href="#module-processchain" title="Permalink to this headline">¶</a></h1>
<p>Product Chain class</p>
<p>This module contains the Product Chain class, which are objects that
link together (and can generate) a linear sequence of unit processes.</p>
<p>Product chains can currently be balanced on an inflow of their initial
unit process or an outflow of their final unit process. It is also possible
to automatically generate diagrams of the flows in a product chain.</p>
<p>Module Outline:</p>
<ul class="simple">
<li>import statements and logger</li>
<li><dl class="first docutils">
<dt>class: ProductChain</dt>
<dd><ul class="first last">
<li>class function: Build</li>
<li>class function: Balance</li>
<li>class function: Diagram</li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="section" id="productchain-class">
<h2>ProductChain Class<a class="headerlink" href="#productchain-class" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="processchain.ProductChain">
<em class="property">class </em><code class="descclassname">processchain.</code><code class="descname">ProductChain</code><span class="sig-paren">(</span><em>chain_data</em>, <em>name='Product Chain'</em>, <em>xls_sheet=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/processchain.html#ProductChain"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#processchain.ProductChain" title="Permalink to this definition">¶</a></dt>
<dd><p>Linear linkage of unit processes.</p>
<p>Product chains are a linear sets of unit process linked by their inflows
and outflow; the outflow of a unit process must be an inflow into
the next unit process. Requires the existence of a unit process library
file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>chain_data</strong> (<em>dataframe/str</em>) – Dataframe or filepath to a excel or
tabular data that specifies the linkages of the unit process,
with each row detailing an inflow, a unit process, and an outflow,
with the outflow in one row being the inflow in the next row.
Chain data is order depedent. Specifying the inflow of the
first row or outflow of the last row is optional.</li>
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Name for the chain. Optional.
(Defaults to “Product Chain.)</li>
<li><strong>xls_sheet</strong> (<em>str/None</em>) – Excel sheet where chain data resides. Optional.
(Defaults to None)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="processchain.ProductChain.name">
<code class="descname">name</code><a class="headerlink" href="#processchain.ProductChain.name" title="Permalink to this definition">¶</a></dt>
<dd><p>the name of the chain</p>
</dd></dl>

<dl class="attribute">
<dt id="processchain.ProductChain.process_chain_df">
<code class="descname">process_chain_df</code><a class="headerlink" href="#processchain.ProductChain.process_chain_df" title="Permalink to this definition">¶</a></dt>
<dd><p>the dataframe of chain linkages</p>
</dd></dl>

<dl class="attribute">
<dt id="processchain.ProductChain.default_product">
<code class="descname">default_product</code><a class="headerlink" href="#processchain.ProductChain.default_product" title="Permalink to this definition">¶</a></dt>
<dd><p>if no other product is specified when balancing
the chain, this will be used. Determined by process_chain_df:
if there is an outflow specified for the last process or an
inflow specified for the first process. If both are specified,
the outflow is used by default.</p>
</dd></dl>

<dl class="attribute">
<dt id="processchain.ProductChain.process_list">
<code class="descname">process_list</code><a class="headerlink" href="#processchain.ProductChain.process_list" title="Permalink to this definition">¶</a></dt>
<dd><p>list of unit process information generated using the
process_chain_df.  The list is in order of the unit processes in
the chain, and each list item is a dictionary including the keys:
- process: UnitProcess object
- i: (str) inflow from process_chain_df
- o: (str) inflow from process_chain_df</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="productchain-build">
<h2>ProductChain.build()<a class="headerlink" href="#productchain-build" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="processchain.ProductChain.build">
<code class="descclassname">processchain.ProductChain.</code><code class="descname">build</code><span class="sig-paren">(</span><em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#processchain.ProductChain.build" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates the needed unit process objects</p>
<p>Chekcs that the processes specified in the chain dataframe have
data available in the unit process library. Checks that the
inflow and outflow specified in the chain exist for the associated
unit process. Populates self.default_product and self.process_list.</p>
</dd></dl>

</div>
<div class="section" id="productchain-balance">
<h2>ProductChain.balance()<a class="headerlink" href="#productchain-balance" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="processchain.ProductChain.balance">
<code class="descclassname">processchain.ProductChain.</code><code class="descname">balance</code><span class="sig-paren">(</span><em>self</em>, <em>qty</em>, <em>product=False</em>, <em>i_o=False</em>, <em>scenario=dat.default_scenario</em><span class="sig-paren">)</span><a class="headerlink" href="#processchain.ProductChain.balance" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the mass balance of the product chain</p>
<p>Based on a quantity of an inflow for the first unit process in the
chain or an outflow for the last unit process, calculates the remaining
quantities of all flows in the chain, assuming all unit processes
are well-specified with zero degrees of freedom.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>qty</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – the quantity of the product to balance on.</li>
<li><strong>product</strong> (<em>str/bool</em>) – the product name. If False, uses the default
product in the chain object attributes. Required if balancing a
chain on an intermediate process.
(Defaults to False)</li>
<li><strong>i_o</strong> (<em>str/bool</em>) – String beginning with “i” or “o”. “i” if the product
is an inflow of the chain’s first unit process, “o” if it is an
outflow of the chain’s last unit process. If False, first checks
to see if product exist in last unit process’s outflows, then
first unit process’s inflows, and uses the first matching
product that it finds. Required if balancing a chain on an
intermediate process.
(Defaults to False)</li>
<li><strong>unit_process</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Name of the unit process that the specified product
belongs to. Necessary to balance chain on intermediate process.</li>
<li><strong>scenario</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the scenario of variable values to use,
corresponding to the matching row index in each unit process’s
var_df.
(Defaults to the string specified in dat.default_scenario)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li>3-level nested dictionary of inflows, <code class="docutils literal notranslate"><span class="pre">[unit</span> <span class="pre">process][flowtype][substance]</span> <span class="pre">=</span> <span class="pre">(float)</span></code></li>
<li>3-level nested dictionary of outflows, <code class="docutils literal notranslate"><span class="pre">[unit</span> <span class="pre">process][flowtype][substance]</span> <span class="pre">=</span> <span class="pre">(float)</span></code></li>
<li>dictionary of intermediate flows, <code class="docutils literal notranslate"><span class="pre">[substance]</span> <span class="pre">=</span> <span class="pre">(float)</span></code></li>
<li>list of lists of internal flows, <code class="docutils literal notranslate"><span class="pre">[chain,</span> <span class="pre">origin</span> <span class="pre">unit,</span> <span class="pre">product,</span> <span class="pre">qty</span> <span class="pre">(float),</span> <span class="pre">chain,</span> <span class="pre">destination</span> <span class="pre">unit]</span></code></li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="productchain-diagram">
<h2>ProductChain.diagram()<a class="headerlink" href="#productchain-diagram" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="processchain.ProductChain.diagram">
<code class="descclassname">processchain.ProductChain.</code><code class="descname">diagram</code><span class="sig-paren">(</span><em>self</em>, <em>view_diagram=True</em>, <em>save=True</em>, <em>outdir=f'{dat.outdir}/pfd'</em><span class="sig-paren">)</span><a class="headerlink" href="#processchain.ProductChain.diagram" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a diagram of the chain</p>
<p>Using Graphviz, takes the unit process names, sets of inflows and
outflows, and the specified linkages of the chain to generate a
diagram of the chain as a png and svg.</p>
<p>Code looks repetitive, but slightly different elements are needed to
be generated if the unit process is the first in the list, a middle
process, or the last unit process in the list, as well as a special
case needed if the chain is only one unit process long. Each node is
also given a long unique identifier, which is necessary for building
factory-level diagrams.</p>
<p>The use of a product flow subgraph allows the unconnected inflows and
outflows to appear in invisible (white) nodes, and also is returnable
for use in larger factory diagrams.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>view</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – If True, displays the diagram in the system
viewer.
(Defaults to True)</li>
<li><strong>save</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – If True, writes the diagram to file
(Defaults to True)</li>
<li><strong>outdir</strong> (<em>str/bool</em>) – The output directory where to write the files.
(Defaults to the output directory specified in dataconfig in
a ‘pfd’ subfolder.)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The Digraph object of the product flow diagram, with each
unit process as a node, with the concatanated chain name and
unit process name (e.g. chainunitprocess) as the identifier,
and also the non-linking inflows and outflows as white-bordered
nodes with concatanated chain, process, and flowtype (e.g.
chainunitprocessinflows)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Optional</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="unit.html" class="btn btn-neutral float-left" title="The Unit Process Module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, S.E. Tanzer

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>