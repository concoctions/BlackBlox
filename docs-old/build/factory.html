

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The Factory Module &mdash; blackblox.py 0.2.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="The Industry Module" href="industry.html" />
    <link rel="prev" title="The Process Chain Module" href="chain.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html">
          

          
            
            <img src="_static/logo150.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                blackblox v0.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">NOTE: This introductory document still must be updated with the latest feature set</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro.html#what-is-blackblox-py">What is blackblox.py?</a></li>
<li class="toctree-l1"><a class="reference internal" href="unit.html">The Unit Process Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="chain.html">The Process Chain Module</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">The Factory Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="industry.html">The Industry Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculators.html">The Calculators Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="io_functions.html">The IO Functions Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataconfig.html">The dataconfig Module</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">blackblox.py</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>The Factory Module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/factory.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-factory-module">
<h1>The Factory Module<a class="headerlink" href="#the-factory-module" title="Permalink to this headline">¶</a></h1>
<p>Note: This page has not yet been formatted. It is currently only the automodule documentation.</p>
<span class="target" id="module-factory"></span><p>Factory class</p>
<p>This module contains the Factory class, which are objects that
link together (and can generate) a set of product chains. One product chain
produces the primary product(s) of the factory, whereas other auxillary chains
provide inflows or processes outflows from the main chain or other auxillary
chains. Auxillary chains can be attached to any process in any chain in the
factory.</p>
<p>Module Outline:</p>
<ul class="simple">
<li>import statements and logger</li>
<li><dl class="first docutils">
<dt>class: Factory</dt>
<dd><ul class="first last">
<li>class function: Build</li>
<li>class function: Balance</li>
<li>class function: Diagram</li>
</ul>
</dd>
</dl>
</li>
</ul>
<dl class="class">
<dt id="factory.Factory">
<em class="property">class </em><code class="descclassname">factory.</code><code class="descname">Factory</code><span class="sig-paren">(</span><em>chain_list_file</em>, <em>connections_file=None</em>, <em>chain_list_sheet=None</em>, <em>connections_sheet=None</em>, <em>name='Factory'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/factory.html#Factory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#factory.Factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Factories are sets of one or more connected products chains</p>
<p>Factories have a primary product chain, and are balanced on a specific
outflow of that chain. Auxillary chains link to the main chain (or other
auxillary chains) at any or multiple unit processes in the chain, and
balance on a specified inflow or outflow of that unit process(es), i.e.
it is assumed the auxillary chain is either providing the inflow or
accepting the outflow.</p>
<p>Factories balance on a specified output product. Product chains that
are not the main output product balance on the relevent inputs and
outputs of the main product. All product chains in a factory are run
using variables from the same scenario.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The product chain (main chain) is assumed to be the first chain
in the tabular data listing the chains in the factory.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>chains_file</strong> (<em>DataFrame/str</em>) – Dataframe or filepath to tabular data
detailing the process chains in the factory. The chain in the first
row of data is assumed to be the main product flow.
Must contain columns for:
[Chain Name, Chain Product, Product_IO, ChainFile]</li>
<li><strong>connections_file</strong> (<em>DataFrame/str</em>) – Dataframe or filepath to tabular data
detailing the connections between the chains in the factory.
Must contain columns for:
[OriginChain, OriginProcess, Product, Product_IO_of_Origin,
Product_IO_of_Destination, DestinationChain]</li>
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><em>optional</em>) – The name of the factory. Defaults to False.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="factory.Factory.name">
<code class="descname">name</code><a class="headerlink" href="#factory.Factory.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the factory.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="factory.Factory.chains_df">
<code class="descname">chains_df</code><a class="headerlink" href="#factory.Factory.chains_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Tabular data of the factory chains and the
location of their data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">data frame</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="factory.Factory.connections_df">
<code class="descname">connections_df</code><a class="headerlink" href="#factory.Factory.connections_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Tabuloar data of the connections
between the factory chains.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">data frame</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="factory.Factory.main_chain">
<code class="descname">main_chain</code><a class="headerlink" href="#factory.Factory.main_chain" title="Permalink to this definition">¶</a></dt>
<dd><p>the name of the factory’s product chain, taken from
the first row of chains_df.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="factory.Factory.main_product">
<code class="descname">main_product</code><a class="headerlink" href="#factory.Factory.main_product" title="Permalink to this definition">¶</a></dt>
<dd><p>the name of the factory’s main product, taken from
the first row of chains_df.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="factory.Factory.chain_dict">
<code class="descname">chain_dict</code><a class="headerlink" href="#factory.Factory.chain_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary of dictionaries containing process chain
objects in the factory. Each chain name is an entry key, with a
value of a dictionary containing the process chain object, name,
product, and whether that product is a chain inflow or outflow.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="factory.Factory.balance">
<code class="descname">balance</code><span class="sig-paren">(</span><em>main_product_qty, scenario='default', write_to_xls=True, outdir='BlackBlox_output', mass_energy=True, energy_flows=['heat', 'energy', 'electricity', 'power']</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/factory.html#Factory.balance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#factory.Factory.balance" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the mass balance of the factory</p>
<p>Based on a quantity of the factory’s main product, calculates the
remaining quantities of all flows in the factory, assuming all unit
processes are well-specified with zero degrees of freedom.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>main_product_qty</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – the quantity of the product to balance on.</li>
<li><strong>product</strong> (<em>str/bool</em>) – the product name. If False, uses the default
product in the chain object attributes.
(Defaults to False)</li>
<li><strong>scenario</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the scenario of variable values to use,
corresponding to the matching row index in each unit process’s
var_df.
(Defaults to the string specified in dat.default_scenario)</li>
<li><strong>write_to_xls</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – If True, outputs the balances to an excel
workbook, with sheets for factory totals, inflows and outflows
for all unit processes, and inflows and outflows by chain.
(Defaults to True)</li>
<li><strong>outdir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Filepath where to create the balance spreadsheets.
(Defaults to the outdir specified in dataconfig)</li>
<li><strong>mass_energy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – If true, seperates mass and energy flows within
each excel sheet, adding rows for the respective totals.
(Defaults to True)</li>
<li><strong>energy_flows</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) – list of prefix/suffixes used to identify which
substances are energy flows and seperates them.
(Defaults to dat.energy_flows)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">dictionary of factory total inflow quantities by substance
dictionary of factory total outflow quantities by substance</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="factory.Factory.build">
<code class="descname">build</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/factory.html#Factory.build"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#factory.Factory.build" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates the needed process chain objects for the factory</p>
<p>Locates the data specified for each process chain, and generates
objects for each chain. Populates self.main_chain, self.main_product,
and self.chain_dict.</p>
</dd></dl>

<dl class="method">
<dt id="factory.Factory.diagram">
<code class="descname">diagram</code><span class="sig-paren">(</span><em>outdir='BlackBlox_output'</em>, <em>view=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/factory.html#Factory.diagram"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#factory.Factory.diagram" title="Permalink to this definition">¶</a></dt>
<dd><p>Outputs a diagram of the factory flows to file.</p>
<p>Using Graphviz, takes the unit process names, sets of inflows and
outflows, and the specified linkages of the factory to generate a
diagram of the chain as a png and svg.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>outdir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The output directory where to write the files.
(Defaults to the output directory specified in dataconfig in
a ‘pfd’ subfolder.)</li>
<li><strong>view</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – If True, displays the diagram in the system
viewer.
(Defaults to True)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="industry.html" class="btn btn-neutral float-right" title="The Industry Module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="chain.html" class="btn btn-neutral float-left" title="The Process Chain Module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, S.E. Tanzer

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>